[board_pins heater_chamber]
mcu: heater_chamber
aliases:
	TH0=PA3, TH1=PA0, TH2=PB1,
	HEATER=PA1, FAN=PA2,
	MODE=PA4,
	LED1=PA7, LED2=PA6, LED3=PA5,
	USART1_TX=PA9, USART1_RX=PA10

[mcu heater_chamber]
serial: /dev/serial/by-id/usb-Klipper_stm32f042x6_1B002A001653304B4D323431-if00
restart_method: command

[heater_generic chamber]
heater_pin: heater_chamber:HEATER
sensor_type: NTC 100K MGB18-104F39050L32
sensor_pin: heater_chamber:TH1
pwm_cycle_time: 0.3
min_temp: 0
max_temp: 60
control: watermark

[temperature_fan heater_chamber]
pin: heater_chamber:FAN
sensor_type: NTC 100K MGB18-104F39050L32
sensor_pin: heater_chamber:TH0
min_temp: 0
max_temp: 120
target_temp: 50.0
min_speed: 1.0
shutdown_speed: 1.0
kick_start_time: 0.5
control: watermark

[verify_heater chamber]
check_gain_time: 600
max_error: 240
heating_gain: 1

[temperature_sensor mcu_chamber_temp]
sensor_type: temperature_mcu
sensor_mcu: heater_chamber

[gcode_button heater_chamber]
pin: ^!heater_chamber:MODE
press_gcode:
	{% if printer["heater_generic chamber"].target > 20 %}
		SET_HEATER_TEMPERATURE HEATER=chamber TARGET=0
		BEEP I=3
	{% else %}
		SET_HEATER_TEMPERATURE HEATER=chamber TARGET=50
		BEEP
	{% endif %}
